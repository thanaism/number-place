# Number Place Generator & Solver

## 概要

Python によるナンプレ問題生成＆解答作成の試作中

## 必須要件整理

- 重複チェック

```py
{
    'created_on' : grid.creation_datetime
    'difficulty' : grid.difficulty
    'type' : grid.type
    'answer' : grid.answer
    'problem' : grid.problem
    'lines' : grid.lines
    'technique_used' : grid.used_techniques
}
```

- 難易度判定
- ビューワ（Excel 出力？)
- 逐次生成

## TODO

- show_on_gui には grid のインスタンスだけ渡して、各タイプに応じた表示をさせる
- インスタンス作成時には問題が生成終わっているようにする？→ しない

  - インスタンス作成
  - 問題・グリッド生成
  - 段階別に解く
  - 重複を判定する
  - csv に転記する（インスタンスを受け取って csv に出力するモジュールをつくる）

- ~~サムグループ個数レンジの設定~~→ 完了
  - 任意の区分けで生成できるようになった
- ~~Grid クラス内で cells を 1 種類しか持っていないので、穴あけ前後をどう管理するか、どう解答を保持するか要検討~~
  - クラス内でインスタンスをコピーして途中過程はそっちで管理するようにした
- ~~せめて各関数やメソッドの docstring は書いておきたい~~
  - だいたい書いたはず（docstring の抜け漏れ管理のベストプラクティスとは？）
- src の各ファイル先頭に docstring をつけて概要を一望できるようにする（すぐ忘れる）
- 各テストケースの意図を忘れないうちに書いておく
- ~~各解法を ON/OFF 出来るようにする~~
  - ベタ書きだけど一応切り替えられるようにはした（ベストプラクティスを知りたい）
- GUI を実装する
  - 問題の生成数の指定（これは最初から実装しておく）
  - 問題で使用する解法の指定（まずは最難で固定：出来たものを振り分ける）
  - 出力先ファイルの指定（まずは同一ディレクトリに固定）
- 問題のビューワを実装する（または Excel に出力する）
  - VBA だと重そうなので、Python から csv を読んで、openpyxl で書き出すのが速そう（文字列と配列の相互変換を VBA でやるのはシンプルにしんどい）
  - 問題・解答・サムをファイルごとに分けて出力
  - 段階に分けて解く方法は……　問題番号を指定してそこから出力させる（最大 10 問など）
  - 各解法で関連セルの色付け等を後から出来るようにしておく？
    - 問題をもとに制約なしで解かせる
    - grid クラスに解法ログをインスタンス変数としてもたせる
    - 要検討

```python
{
    'method': 'X-Wing',
    'related': [1,3,4,6,5],
    'targets': [2,3]
    # セルと変動のあった数字でタプルとして管理すれば全情報をあとから参照できる？
    # ありうる要素：関連セル、対象セル、消した数字or確定した数字
}
```

- 問題を csv に出力する
- ~~対角線の grid 生成条件追加~~→ 完了
  - erase_candidates 周りを要確認
- ~~ジグソー生成と house 追加~~
- ~~サム生成と house 追加~~
- ~~罫線情報からグループ情報~~
- ~~グループ情報から罫線情報~~
- ~~グループは dfs で取得~~
- グループが交換可能か
  - 周囲に存在する同一 Gr の個数で場合分けが可能
  - 1 つなら無条件 OK
  - 2 つなら、
    - 対向 2 辺は NG
    - 以下は OK
    - ↑↗ ＋ →
    - →↘ ＋ ↓
    - ↓↙ ＋ ←
    - ←↖ ＋ ↑

### more

- beautiful soup ないし requests で問題をサーバーに submit する
